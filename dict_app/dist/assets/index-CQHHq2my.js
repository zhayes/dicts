import{c as P,i as b,k as _,l as L,t as m,j as N,o as E,e as y,p as U,f as k,b as j,d as R,a as C,s as F,q as H,r as O,u as q}from"./index-y-uD06Fv.js";var Z=m("<section>");const de=e=>{const n=P(()=>e.children);return(()=>{var t=Z();return b(t,n),_(()=>L(t,`max-w-screen-lg w-full m-auto flex-1 px-5 py-6 ${e.class||null} h-80`)),t})()};var D=m('<div class="relative flex-1">'),G=m('<div class="absolute drop-shadow-xl py-5 rounded-md bg-white left-0 right-0 top-full mt-4 z-20">'),J=m("<div>");const Q=e=>{const n=E(),[t,r]=y(-1),a=U(),o=d=>{const u=e?.options?.length||0;return r(d<0?-1:d>u-1?u-1:d),e.options?.[d]};e.ref&&e.ref({selectedItem:o,selectedPreItem(){return o(t()-1)},selectedNextItem(){return o(t()+1)}}),k(()=>{e.options,a.pathname,o(-1)});const c=P(()=>e.children);return(()=>{var d=D();return b(d,c,null),b(d,(()=>{var u=j(()=>!!(e.visible&&e.options?.length));return()=>u()?(()=>{var i=G();return b(i,()=>e.options?.map?.((v,g)=>(()=>{var h=J();return h.$$click=()=>{const x=location.pathname.split("/")[1];n(`${x==="dict"?"/dict/":"/word/"}${v.name}`),e.onChange?.(v.name)},b(h,()=>v.name),_(()=>L(h,`text-xl text-black px-5 ${t()===g?"text-red-500":null} hover:text-red-500 leading-10 cursor-pointer ${v.type?null:"text-blue-600"}`)),h})())),i})():null})(),null),d})()};N(["click"]);const V=({delay:e},n)=>{let t,r=!0;const a=(...o)=>{r?(clearTimeout(t),t=setTimeout(()=>{r&&n(...o),t=void 0},e)):n(...o)};return a.isPending=()=>t!==void 0,a.cancel=()=>{r=!1},a.flush=(...o)=>n(...o),a};var $=(e=>(e[e.ENTER=13]="ENTER",e[e.UP=38]="UP",e[e.DOWN=40]="DOWN",e))($||{});const X=(e,n)=>{const t=r=>{r.target;const a=r.which||r.keyCode;e.includes(a)&&n&&n(a)};return[()=>{window.addEventListener("keydown",t)},()=>{window.removeEventListener("keydown",t)}]};var A=m('<div class="flex items-center flex-1 rounded-xl border-2 border-gray-200 bg-gray-200 hover:bg-white relative"><input role=search class="rounded-xl pr-14 py-4 px-5 flex-1 h-13 bg-transparent text-xl font-mono font-medium outline-none hover:outline outline-offset-4 focus:outline-4 hover:outline-4 hover:outline-red-600 focus:outline-red-600 focus:outline-offset-8 transition-all focus:bg-white"><svg class="cursor-pointer size-6 absolute right-5 font-bold"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2 stroke=currentColor><path stroke-linecap=round stroke-linejoin=round d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z">');const B=()=>{const[e,n]=y(!1),[t,r]=y([]),[a,o]=y(""),c=R(),d=E();let u=null,i=null;const v=()=>{setTimeout(()=>{const l=i.value.length;i.setSelectionRange(l,l)},0)},[g,h]=X([$.UP,$.DOWN],l=>{if(e()){if(l===$.UP){const{name:s}=u.selectedPreItem()||{};s&&o(s),v()}if(l===$.DOWN){const{name:s}=u.selectedNextItem()||{};s&&o(s),v()}}}),x=l=>{if(!l.trim())return;(window.location.pathname.split("/")[1]==="dict"?H:O)(l.trim()).then(({data:p})=>{const f=p.map(w=>w.name).indexOf(l);if(f!=-1){const w=p.splice(f,1)[0];r([w].concat(p))}else r(t().concat(p))})},T=V({delay:500},l=>{x(l)}),M=l=>{o(l.value);const s=a()?.trim?.();r([{name:s,value:s,type:"manual"}].filter(({name:p})=>!!p)),s&&T(s)};return k(()=>{const l=decodeURIComponent(c.word?.trim?.()||"");o(l)}),k(()=>{h(),e()&&g()}),C(Q,{get visible(){return e()},get options(){return t()},ref(l){var s=u;typeof s=="function"?s(l):u=l},get children(){var l=A(),s=l.firstChild,p=s.nextSibling;s.addEventListener("keypress",f=>{const w=f.target;if((f.which||f.keyCode)===13){const W=w.value?.trim?.(),z=location.pathname.split("/")[1];d(`${z==="dict"?"/dict/":"/word/"}${encodeURIComponent(W)}`),i?.blur?.()}}),s.$$input=f=>{M(f.target)},s.addEventListener("blur",()=>{setTimeout(()=>{n(!1)},100)}),s.addEventListener("focus",()=>{n(!0)});var S=i;return typeof S=="function"?q(S,s):i=s,p.$$click=()=>{console.log(a()),a().trim()&&x(a().trim())},_(()=>F(s,"placeholder",e()?"搜索":"Search")),_(()=>s.value=a()),l}})},ue=B;N(["input","click"]);var K=m("<div>");const Y=e=>{const n=P(()=>e.children);return(()=>{var t=K();return b(t,n),_(()=>L(t,`border border-slate-300 shadow-sm rounded-xl p-5 sm:p-10 font-mono mb-10 mt-10 hover:shadow-lg transition-shadow ${e.class}`)),t})()},ee=(e,n)=>{const t=[];let r=e.indexOf(n);for(;r>-1;)t.push(r),r=e.indexOf(n,r+1);return t},I={link:"hover:scale-110 inline-block transition-all text-red-800 cursor-pointer font-bold",baseline:"inline-block underline decoration-dashed decoration-red-800"},te=(e="link",n,t)=>`<a class="${I[e]}" href="${t}">${n}</a>`,ve=(e,n)=>{k(()=>{const{url_map:t,targets:r,style:a}=n();r?.forEach?.(o=>{let c=e.innerHTML,d=ee(c,o);if(!c.includes(o))return;const u=t[o];d.forEach(i=>{const v=c[i-1],g=c[i+o.length],h=I[a||"link"];if(!v?.toLowerCase().match(/[a-z]|[-=/><]/)&&!g?.toLowerCase().match(/[a-z]|[-=/><]/)&&v!=="{"&&g!=="}"&&!h.includes(o)&&!h.includes(o)){const x=te(a,o,u);c=c.substring(0,i)+x+c.substring(i+o.length)}}),e.innerHTML=c})})};var ne=m('<div class="animate-pulse flex space-x-4"><div class="flex-1 space-y-6 py-1"><div class="h-2 bg-slate-700 rounded"></div><div class=space-y-3><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-1"></div><div class="h-2 bg-slate-700 rounded col-span-2"></div></div><div class="h-2 bg-slate-700 rounded"></div></div><div class=space-y-3><div class="h-2 bg-slate-700 rounded"></div><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-2"></div><div class="h-2 bg-slate-700 rounded col-span-1"></div></div></div><div class=space-y-3><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-1"></div><div class="h-2 bg-slate-700 rounded col-span-2"></div></div><div class="h-2 bg-slate-700 rounded"></div></div><div class=space-y-3><div class="h-2 bg-slate-700 rounded"></div><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-2"></div><div class="h-2 bg-slate-700 rounded col-span-1">');const se=()=>C(Y,{get children(){return ne()}}),he=se;var oe=m('<div class="flex-1 font-mono animate-bounce font-extrabold text-black text-center flex items-center justify-center text-5xl">404');const re=()=>(()=>{var e=oe();return e.style.setProperty("text-shadow","1px 10px 10px gray"),e.style.setProperty("animation","bounce 2s infinite"),e})();var le=m('<div class="flex-1 font-mono animate-bounce font-extrabold text-black text-center flex flex-col items-center justify-center text-2xl"><div>刷新重试（500）</div><button class="rounded-2xl outline-none border-black shadow-lg border-2 shadow-slate-300 mt-8 bg-white text-black py-3 px-5 text-2xl"><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99">');const ae=()=>(()=>{var e=le(),n=e.firstChild,t=n.nextSibling;return e.style.setProperty("text-shadow","1px 10px 10px gray"),e.style.setProperty("animation","bounce 2s infinite"),t.$$click=()=>{window.location.reload()},e})();N(["click"]);const ie=e=>({400:C(re,{}),500:C(ae,{})})[e.code],me=ie;export{Y as C,ue as S,ve as a,me as b,he as c,de as d};
