import{c as T,i as p,k as y,l as C,t as v,j as I,o as j,e as k,p as H,f as S,b as R,d as F,a as P,s as M,q as O,r as q,u as V}from"./index-h191wd5h.js";var Z=v("<section>");const he=e=>{const n=T(()=>e.children);return(()=>{var t=Z();return p(t,n),y(()=>C(t,`max-w-screen-lg w-full m-auto flex-1 px-5 py-6 ${e.class||null} h-80`)),t})()};var D=v('<div class="relative flex-1">'),G=v('<div class="absolute drop-shadow-xl py-5 rounded-md bg-white left-0 right-0 top-full mt-4 z-20">'),J=v("<div>"),Q=v('<button><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2 stroke=currentColor class=size-3><path stroke-linecap=round stroke-linejoin=round d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25">');const X=e=>{const n=j(),[t,r]=k(-1),a=H(),s=d=>{const f=e?.options?.length||0;return r(d<0?-1:d>f-1?f-1:d),e.options?.[d]};e.ref&&e.ref({selectedItem:s,selectedPreItem(){return s(t()-1)},selectedNextItem(){return s(t()+1)}}),S(()=>{e.options,a.pathname,s(-1)});const i=T(()=>e.children);return(()=>{var d=D();return p(d,i,null),p(d,(()=>{var f=R(()=>!!(e.visible&&e.options?.length));return()=>f()?(()=>{var u=G();return p(u,()=>e.options?.map?.((c,g)=>{const m=location.pathname.split("/")[1]==="dict";return(()=>{var h=J();return h.$$click=()=>{n(`${m?"/dict/":"/word/"}${c.name}`),e.onChange?.(c.name)},p(h,()=>c.name,null),p(h,g===0?(()=>{var x=Q(),L=x.firstChild;return x.$$click=E=>{E.stopPropagation(),n(`${m?"/word/":"/dict/"}${c.name}`)},C(x,`${m?"bg-black":"bg-red-700"} inline-flex items-center text-white py-1 px-2 text-xs rounded-md border-b-2 border-gray-400`),p(x,m?"辞源搜索":"词意查询",L),x})():null,null),y(()=>C(h,`flex justify-between items-center text-xl text-black px-5 ${t()===g?"text-red-500":null} hover:text-red-500 leading-10 cursor-pointer ${c.type?null:"text-blue-600"}`)),h})()})),u})():null})(),null),d})()};I(["click"]);const A=({delay:e},n)=>{let t,r=!0;const a=(...s)=>{r?(clearTimeout(t),t=setTimeout(()=>{r&&n(...s),t=void 0},e)):n(...s)};return a.isPending=()=>t!==void 0,a.cancel=()=>{r=!1},a.flush=(...s)=>n(...s),a};var _=(e=>(e[e.ENTER=13]="ENTER",e[e.UP=38]="UP",e[e.DOWN=40]="DOWN",e))(_||{});const B=(e,n)=>{const t=r=>{r.target;const a=r.which||r.keyCode;e.includes(a)&&n&&n(a)};return[()=>{window.addEventListener("keydown",t)},()=>{window.removeEventListener("keydown",t)}]};var K=v('<div class="flex items-center flex-1 rounded-xl border-2 border-gray-200 bg-gray-200 hover:bg-white relative"><input role=search class="rounded-xl pr-14 py-4 px-5 flex-1 h-13 bg-transparent text-xl font-mono font-medium outline-none hover:outline outline-offset-4 focus:outline-4 hover:outline-4 hover:outline-red-600 focus:outline-red-600 focus:outline-offset-8 transition-all focus:bg-white"><svg class="cursor-pointer size-6 absolute right-5 font-bold"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2 stroke=currentColor><path stroke-linecap=round stroke-linejoin=round d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z">');const Y=e=>{const[n,t]=k(!1),[r,a]=k([]),[s,i]=k(""),d=F(),f=j();let u=null,c=null;const g=()=>{setTimeout(()=>{const l=c.value.length;c.setSelectionRange(l,l)},0)},[m,h]=B([_.UP,_.DOWN],l=>{if(n()){if(l===_.UP){const{name:o}=u.selectedPreItem()||{};o&&i(o),g()}if(l===_.DOWN){const{name:o}=u.selectedNextItem()||{};o&&i(o),g()}}}),x=l=>{if(!l.trim())return;(window.location.pathname.split("/")[1]==="dict"?O:q)(l.trim()).then(({data:b})=>{const $=b.map(w=>w.name).indexOf(l);if($!=-1){const w=b.splice($,1)[0];a([w].concat(b))}else a(r().concat(b))})},L=A({delay:500},l=>{x(l)}),E=l=>{i(l.value);const o=s()?.trim?.();a([{name:o,value:o,type:"manual"}].filter(({name:b})=>!!b)),o&&L(o)};return S(()=>{const l=decodeURIComponent(d.word?.trim?.()||"");i(l)}),S(()=>{h(),n()&&m()}),e.ref&&e.ref({setValue(l){i(l)}}),P(X,{get visible(){return n()},get options(){return r()},ref(l){var o=u;typeof o=="function"?o(l):u=l},get children(){var l=K(),o=l.firstChild,b=o.nextSibling;o.addEventListener("keypress",$=>{const w=$.target;if(($.which||$.keyCode)===13){const W=w.value?.trim?.(),U=location.pathname.split("/")[1]==="dict";f(`${U?"/dict/":"/word/"}${encodeURIComponent(W)}`),c?.blur?.()}}),o.$$input=$=>{E($.target)},o.addEventListener("blur",()=>{setTimeout(()=>{t(!1)},100)}),o.addEventListener("focus",()=>{t(!0)});var N=c;return typeof N=="function"?V(N,o):c=o,b.$$click=()=>{console.log(s()),s().trim()&&x(s().trim())},y(()=>M(o,"placeholder",n()?location.pathname.split("/")[1]==="dict"?"搜索英文词意":"检索英文辞源":"Search")),y(()=>o.value=s()),l}})},pe=Y;I(["input","click"]);var ee=v("<div>");const te=e=>{const n=T(()=>e.children);return(()=>{var t=ee();return p(t,n),y(()=>C(t,`border border-slate-300 shadow-sm rounded-xl p-5 sm:p-10 font-mono mb-10 mt-10 hover:shadow-lg transition-shadow ${e.class}`)),t})()},ne=(e,n)=>{const t=[];let r=e.indexOf(n);for(;r>-1;)t.push(r),r=e.indexOf(n,r+1);return t},z={link:"hover:scale-110 inline-block transition-all text-red-800 cursor-pointer font-bold",baseline:"inline-block underline decoration-dashed decoration-red-800"},se=(e="link",n,t)=>`<a class="${z[e]}" href="${t}">${n}</a>`,fe=(e,n)=>{S(()=>{const{url_map:t,targets:r,style:a}=n();r?.forEach?.(s=>{let i=e.innerHTML,d=ne(i,s);if(!i.includes(s))return;const f=t[s];d.forEach(u=>{const c=i[u-1],g=i[u+s.length],m=z[a||"link"];if(!c?.toLowerCase().match(/[a-z]|[-=/><]/)&&!g?.toLowerCase().match(/[a-z]|[-=/><]/)&&c!=="{"&&g!=="}"&&!m.includes(s)&&!m.includes(s)){const h=se(a,s,f);i=i.substring(0,u)+h+i.substring(u+s.length)}}),e.innerHTML=i})})};var oe=v('<div class="animate-pulse flex space-x-4"><div class="flex-1 space-y-6 py-1"><div class="h-2 bg-slate-700 rounded"></div><div class=space-y-3><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-1"></div><div class="h-2 bg-slate-700 rounded col-span-2"></div></div><div class="h-2 bg-slate-700 rounded"></div></div><div class=space-y-3><div class="h-2 bg-slate-700 rounded"></div><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-2"></div><div class="h-2 bg-slate-700 rounded col-span-1"></div></div></div><div class=space-y-3><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-1"></div><div class="h-2 bg-slate-700 rounded col-span-2"></div></div><div class="h-2 bg-slate-700 rounded"></div></div><div class=space-y-3><div class="h-2 bg-slate-700 rounded"></div><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-slate-700 rounded col-span-2"></div><div class="h-2 bg-slate-700 rounded col-span-1">');const re=()=>P(te,{get children(){return oe()}}),ge=re;var le=v('<div class="flex-1 font-mono animate-bounce font-extrabold text-black text-center flex items-center justify-center text-5xl">404');const ae=()=>(()=>{var e=le();return e.style.setProperty("text-shadow","1px 10px 10px gray"),e.style.setProperty("animation","bounce 2s infinite"),e})();var ie=v('<div class="flex-1 font-mono animate-bounce font-extrabold text-black text-center flex flex-col items-center justify-center text-2xl"><div>刷新重试（500）</div><button class="rounded-2xl outline-none border-black shadow-lg border-2 shadow-slate-300 mt-8 bg-white text-black py-3 px-5 text-2xl"><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2 stroke=currentColor class=size-6><path stroke-linecap=round stroke-linejoin=round d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99">');const ce=()=>(()=>{var e=ie(),n=e.firstChild,t=n.nextSibling;return e.style.setProperty("text-shadow","1px 10px 10px gray"),e.style.setProperty("animation","bounce 2s infinite"),t.$$click=()=>{window.location.reload()},e})();I(["click"]);const de="/assets/logo-ATTEhxol.png";var ue=v('<div class="flex items-center justify-center flex-col m-auto"><img class=h-40>');const ve=e=>{const n={400:P(ae,{}),500:P(ce,{})}[e.code];return(()=>{var t=ue(),r=t.firstChild;return p(t,n,r),M(r,"src",de),t})()},xe=ve;export{te as C,pe as S,fe as a,xe as b,ge as c,he as d};
