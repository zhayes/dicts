import{j as N,e as x,f as P,u as C,k as O,l as A,s as k,t as c,a as m,i as l,b as _,d as L,m as M,n as R}from"./index-xtx9p-1U.js";import{C as V,a as E,S as Y,c as z,b as H,d as J}from"./index-bC70GVOm.js";var U=c('<span><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 class=size-6><path stroke-linecap=round stroke-linejoin=round d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"></path></svg><audio preload=none>');const w=u=>{const[g,p]=x(!1);let f;const o=()=>{f.play()};return P(()=>{f.addEventListener("play",()=>{p(!0)}),f.addEventListener("pause",()=>{p(!1)}),f.addEventListener("ended",()=>{p(!1)}),f.addEventListener("error",r=>{p(!1)})}),(()=>{var r=U(),i=r.firstChild,n=i.nextSibling;r.$$click=o;var d=f;return typeof d=="function"?C(d,n):f=n,n.style.setProperty("display","none"),O(t=>{var s=`flex items-center cursor-pointer rounded-sm hover:shadow-lg scale-200 ${g()?"animate-ping":""}`,a=u.color||"currentColor",e=u.src;return s!==t.e&&A(r,t.e=s),a!==t.t&&k(i,"stroke",t.t=a),e!==t.a&&k(n,"src",t.a=e),t},{e:void 0,t:void 0,a:void 0}),r})()};N(["click"]);var B=c('<div class="text-black text-base leading-8"><div class="flex items-baseline space-x-2"><span class="text-4xl font-semibold relative font-math"><i class="text-xs text-red-500 absolute -top-2 -left-2"></i></span><span class="text-orange-400 italic"></span></div><div class="flex items-center gap-3 font-math"><span class=mr-5>'),D=c('<div class="mt-10 font-math">'),I=c('<div class=mb-10><div class="mb-3 text-lg"><span class=text-green-500></span><span class="text-lg font-extrabold">'),T=c('<button class="px-2 py-1 leading-3 border border-black border-b-4 border-b-black bg-gray-600 text-white rounded text-lg mr-2 font-semibold">'),Z=c('<span class="font-semibold ml-2 items-center text-base italic"><span class=text-yellow-600>SYN</span> <span class="text-orange-600 font-bold text-xl">'),q=c('<div class="flex flex-col justify-start leading-8 mb-4"><div class="flex gap-1 items-center mb-2"><span class="font-semibold leading-6"></span><span class="font-semibold leading-6">'),F=c('<div class="flex text-base items-center gap-1 mb-2"><div class=text-gray-600>'),G=c('<div class="p-5 border-2 rounded-md text-base leading-8 bg-gray-100 font-math"><div class="font-bold text-2xl">CORPUS'),K=c('<div class=mt-6><div class="mb-3 font-semibold text-xl">'),Q=c('<div class="mb-3 leading-5">');const W=({item:u,word:g,pos_len:p,index:f})=>m(V,{class:"font-math",get children(){return[(()=>{var o=B(),r=o.firstChild,i=r.firstChild,n=i.firstChild,d=i.nextSibling,t=r.nextSibling,s=t.firstChild;return l(n,()=>u.POS&&p>1?f+1:null),l(i,()=>u.word||g,null),l(d,()=>u.POS),l(s,()=>u.PronCodes),l(t,()=>u.word_audio?.map((a,e)=>m(w,{src:a,color:e===0?"red":"blue"})),null),o})(),(()=>{var o=D();return l(o,()=>u?.examples?.map?.(r=>{const i={};return r?.a?.forEach?.(([n,d])=>{i[n]=`/dict/${d}`}),(()=>{var n=I(),d=n.firstChild,t=d.firstChild,s=t.nextSibling;return l(d,(()=>{var a=_(()=>!!r.main_example_means);return()=>a()?(()=>{var e=T();return l(e,()=>r.main_example_means),e})():null})(),t),l(t,()=>r.is_countable),C(E,s,()=>({style:"baseline",url_map:i,targets:r?.a?.map(([a,e])=>a)})),l(s,()=>r.definition),l(d,(()=>{var a=_(()=>!!r.SYN);return()=>a()?(()=>{var e=Z(),v=e.firstChild,$=v.nextSibling,h=$.nextSibling;return l(h,()=>r.SYN),e})():null})(),null),l(n,()=>r.example_list.map(a=>(()=>{var e=q(),v=e.firstChild,$=v.firstChild,h=$.nextSibling;return l(v,(()=>{var b=_(()=>!!a.audio_src);return()=>b()?m(w,{get src(){return a.audio_src},color:"gray"}):null})(),$),l($,()=>a.example_main_title),l(h,()=>a.content),l(e,()=>a.exp_item?.map(b=>(()=>{var y=F(),S=y.firstChild;return l(y,(()=>{var j=_(()=>!!b.audio_src);return()=>j()?m(w,{get src(){return b.audio_src},color:"gray"}):null})(),S),l(S,()=>b.content),y})()),null),e})()),null),n})()})),o})(),_(()=>_(()=>!!u.corpus_list?.length)()?(()=>{var o=G();return o.firstChild,l(o,()=>u.corpus_list?.map(({corpus_title:r,corpus_exas:i,a:n})=>{const d={};return n?.forEach?.(([t,s])=>{d[t]=`/dict/${s}`}),(()=>{var t=K(),s=t.firstChild;return C(E,t,()=>({style:"baseline",url_map:d,targets:n?.map(([a,e])=>a)})),l(s,r),l(t,()=>i?.map(a=>(()=>{var e=Q();return l(e,a),e})()),null),t})()}),null),o})():null)]}}),X=W;var ee=c('<div class="p-6 bg sticky top-0 bg-red-900 z-10 shadow-lg"><div class="max-w-screen-sm flex flex-1 m-auto">'),te=c('<div class="h-96 flex items-center justify-center">');const se=u=>{const[g,p]=x({}),[f,o]=x(!0),[r,i]=x(null);let n;const d=async t=>await R(t.trim().split(" ").join("-")).then(s=>{const a=s.data,e=s.word;if(!a){p({}),i(400);return}const v=JSON.parse(a);v.word=e,n.setValue(e),p(v),i(null)}).catch(()=>{p({}),i(500)});return P(async()=>{const t=L(),s=decodeURIComponent(t.word||"");if(!s?.trim?.())return;o(!0);const{data:a}=await M(s.trim().split(" ").join("-")).catch(v=>{i(500),o(!1)});if(!a?.data){await d(s).finally(()=>{o(!1)});return}const e=JSON.parse(a.data);Array.isArray(e)?p({word_family:[],dicts:e,word:s}):(e.word=s,p(e)),i(null),o(!1)}),[(()=>{var t=ee(),s=t.firstChild;return l(s,m(Y,{ref(a){var e=n;typeof e=="function"?e(a):n=a}})),t})(),m(J,{get children(){return[_(()=>_(()=>!!f())()?m(z,{}):g()?.dicts?.map?.((t,s)=>{const a=g()?.dicts.map(e=>e.POS).filter(e=>!!e).length;return m(X,{item:t,get word(){return g().word},pos_len:a,index:s})})),_(()=>_(()=>!!(r()&&!f()))()?(()=>{var t=te();return l(t,m(H,{get code(){return r()}})),t})():null)]}})]};export{se as default};
