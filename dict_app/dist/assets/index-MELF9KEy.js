import{j as O,e as b,f as E,u as w,k as A,l as L,s as S,t as p,a as m,i as l,b as _,d as M,m as R,n as N}from"./index-xEgvAsQz.js";import{C as V,a as k,S as z,c as H,b as J,d as U}from"./index-FzlDlqZs.js";var B=p('<span><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 class=size-6><path stroke-linecap=round stroke-linejoin=round d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"></path></svg><audio preload=none>');const y=c=>{const[v,u]=b(!1);let f;const o=()=>{f.play()};return E(()=>{f.addEventListener("play",()=>{u(!0)}),f.addEventListener("pause",()=>{u(!1)}),f.addEventListener("ended",()=>{u(!1)}),f.addEventListener("error",s=>{u(!1)})}),(()=>{var s=B(),i=s.firstChild,n=i.nextSibling;s.$$click=o;var d=f;return typeof d=="function"?w(d,n):f=n,n.style.setProperty("display","none"),A(e=>{var r=`flex items-center cursor-pointer rounded-sm hover:shadow-lg scale-200 ${v()?"animate-ping":""}`,a=c.color||"currentColor",t=c.src;return r!==e.e&&L(s,e.e=r),a!==e.t&&S(i,"stroke",e.t=a),t!==e.a&&S(n,"src",e.a=t),e},{e:void 0,t:void 0,a:void 0}),s})()};O(["click"]);var D=p('<div class="text-black text-base leading-8"><div class="flex items-baseline space-x-2"><span class="text-4xl font-semibold relative font-math"><i class="text-xs text-red-500 absolute -top-2 -left-2"></i></span><span class="text-orange-400 italic"></span></div><div class="flex items-center gap-3 font-math"><span class=mr-5>'),I=p('<div class="mt-10 font-math">'),T=p('<div class=mb-10><div class="mb-3 text-lg"><span class=text-green-500></span><span class="text-lg font-extrabold">'),Z=p('<button class="px-2 py-1 leading-3 border border-black border-b-4 border-b-black bg-gray-600 text-white rounded text-lg mr-2 font-semibold">'),q=p('<div class="flex flex-col justify-start leading-8 mb-4"><div class="flex gap-1 items-center mb-2"><span class="font-semibold leading-6"></span><span class="font-semibold leading-6">'),F=p('<div class="flex text-base items-center gap-1 mb-2"><div class=text-gray-600>'),G=p('<div class="p-5 border-2 rounded-md text-base leading-8 bg-gray-100 font-math"><div class="font-bold text-2xl">CORPUS'),K=p('<div class=mt-6><div class="mb-3 font-semibold text-xl">'),Q=p('<div class="mb-3 leading-5">');const W=({item:c,word:v,pos_len:u,index:f})=>m(V,{class:"font-math",get children(){return[(()=>{var o=D(),s=o.firstChild,i=s.firstChild,n=i.firstChild,d=i.nextSibling,e=s.nextSibling,r=e.firstChild;return l(n,()=>c.POS&&u>1?f+1:null),l(i,()=>c.word||v,null),l(d,()=>c.POS),l(r,()=>c.PronCodes),l(e,()=>c.word_audio?.map((a,t)=>m(y,{src:a,color:t===0?"red":"blue"})),null),o})(),(()=>{var o=I();return l(o,()=>c?.examples?.map?.(s=>{const i={};return s?.a?.forEach?.(([n,d])=>{i[n]=`/dict/${d}`}),(()=>{var n=T(),d=n.firstChild,e=d.firstChild,r=e.nextSibling;return l(d,(()=>{var a=_(()=>!!s.main_example_means);return()=>a()?(()=>{var t=Z();return l(t,()=>s.main_example_means),t})():null})(),e),l(e,()=>s.is_countable),w(k,r,()=>({style:"baseline",url_map:i,targets:s?.a?.map(([a,t])=>a)})),l(r,()=>s.definition),l(n,()=>s.example_list.map(a=>(()=>{var t=q(),g=t.firstChild,x=g.firstChild,P=x.nextSibling;return l(g,(()=>{var $=_(()=>!!a.audio_src);return()=>$()?m(y,{get src(){return a.audio_src},color:"gray"}):null})(),x),l(x,()=>a.example_main_title),l(P,()=>a.content),l(t,()=>a.exp_item?.map($=>(()=>{var h=F(),C=h.firstChild;return l(h,(()=>{var j=_(()=>!!$.audio_src);return()=>j()?m(y,{get src(){return $.audio_src},color:"gray"}):null})(),C),l(C,()=>$.content),h})()),null),t})()),null),n})()})),o})(),_(()=>_(()=>!!c.corpus_list?.length)()?(()=>{var o=G();return o.firstChild,l(o,()=>c.corpus_list?.map(({corpus_title:s,corpus_exas:i,a:n})=>{const d={};return n?.forEach?.(([e,r])=>{d[e]=`/dict/${r}`}),(()=>{var e=K(),r=e.firstChild;return w(k,e,()=>({style:"baseline",url_map:d,targets:n?.map(([a,t])=>a)})),l(r,s),l(e,()=>i?.map(a=>(()=>{var t=Q();return l(t,a),t})()),null),e})()}),null),o})():null)]}}),X=W;var Y=p('<div class="p-6 bg sticky top-0 bg-red-900 z-10 shadow-lg"><div class="max-w-screen-sm flex flex-1 m-auto">'),ee=p('<div class="h-96 flex items-center justify-center">');const re=c=>{const[v,u]=b({}),[f,o]=b(!0),[s,i]=b(null);let n;const d=async e=>await N(e.trim().split(" ").join("-")).then(r=>{const a=r.data,t=r.word;if(!a){u({}),i(400);return}const g=JSON.parse(a);g.word=t,n.setValue(t),u(g),i(null)}).catch(()=>{u({}),i(500)});return E(async()=>{const e=M(),r=decodeURIComponent(e.word||"");if(!r?.trim?.())return;o(!0);const{data:a}=await R(r.trim().split(" ").join("-")).catch(g=>{i(500),o(!1)});if(!a?.data){await d(r).finally(()=>{o(!1)});return}const t=JSON.parse(a.data);Array.isArray(t)?u({word_family:[],dicts:t,word:r}):(t.word=r,u(t)),i(null),o(!1)}),[(()=>{var e=Y(),r=e.firstChild;return l(r,m(z,{ref(a){var t=n;typeof t=="function"?t(a):n=a}})),e})(),m(U,{get children(){return[_(()=>_(()=>!!f())()?m(H,{}):v()?.dicts?.map?.((e,r)=>{const a=v()?.dicts.map(t=>t.POS).filter(t=>!!t).length;return m(X,{item:e,get word(){return v().word},pos_len:a,index:r})})),_(()=>_(()=>!!s())()?(()=>{var e=ee();return l(e,m(J,{get code(){return s()}})),e})():null)]}})]};export{re as default};
