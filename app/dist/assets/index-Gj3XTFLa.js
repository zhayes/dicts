import{j as L,e as h,f as E,u as y,k as O,l as A,s as S,t as p,a as _,i as a,b as f,d as M,m as R,n as N}from"./index-yL99E4AV.js";import{a as k,C as z,S as H,b as J,L as U,c as B}from"./index-UL9z9Mmr.js";var D=p('<span><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 class=size-6><path stroke-linecap=round stroke-linejoin=round d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"></path></svg><audio preload=none>');const x=d=>{const[v,c]=h(!1);let u;const i=()=>{u.play()};return E(()=>{u.addEventListener("play",()=>{c(!0)}),u.addEventListener("pause",()=>{c(!1)}),u.addEventListener("ended",()=>{c(!1)}),u.addEventListener("error",s=>{c(!1)})}),(()=>{var s=D(),r=s.firstChild,t=r.nextSibling;s.$$click=i;var l=u;return typeof l=="function"?y(l,t):u=t,t.style.setProperty("display","none"),O(e=>{var m=`flex items-center cursor-pointer rounded-sm hover:shadow-lg scale-200 ${v()?"animate-ping":""}`,n=d.color||"currentColor",o=d.src;return m!==e.e&&A(s,e.e=m),n!==e.t&&S(r,"stroke",e.t=n),o!==e.a&&S(t,"src",e.a=o),e},{e:void 0,t:void 0,a:void 0}),s})()};L(["click"]);var I=p('<div class="text-black text-base leading-8"><div class="flex items-baseline space-x-2"><span class="text-4xl font-semibold relative font-math"><i class="text-xs text-red-500 absolute -top-2 -left-2"></i></span><span class="text-orange-400 italic"></span></div><div class="flex items-center gap-3 font-math"><span class=mr-5>'),T=p('<div class="mt-10 font-math">'),V=p('<div class=mb-10><div class="mb-3 text-lg"><span class=text-green-500></span><span class="text-lg font-extrabold">'),Z=p('<button class="px-2 py-1 leading-3 border border-black border-b-2 border-l-2 border-b-red-500 border-l-red-500 bg-black text-white rounded text-sm mr-2 font-semibold italic">'),q=p('<div class="flex flex-col justify-start leading-8 mb-4"><div class="flex gap-1 items-center mb-2"><span class="font-semibold leading-6"></span><span class="font-semibold leading-6">'),F=p('<div class="flex text-base items-center gap-1 mb-2"><div class=text-gray-600>'),G=p('<div class="p-5 border-2 rounded-md text-base leading-8 bg-gray-100 font-math"><div class="font-bold text-2xl">CORPUS'),K=p('<div class=mt-6><div class="mb-3 font-semibold text-xl">'),Q=p('<div class="mb-3 leading-5">');const W=({item:d,word:v,pos_len:c,index:u})=>_(z,{class:"font-math",get children(){return[(()=>{var i=I(),s=i.firstChild,r=s.firstChild,t=r.firstChild,l=r.nextSibling,e=s.nextSibling,m=e.firstChild;return a(t,()=>d.POS&&c>1?u+1:null),a(r,()=>d.word||v,null),a(l,()=>d.POS),a(m,()=>d.PronCodes),a(e,()=>d.word_audio?.map((n,o)=>_(x,{src:n,color:o===0?"red":"blue"})),null),i})(),(()=>{var i=T();return a(i,()=>d?.examples?.map?.(s=>{const r={};return s?.a?.forEach?.(([t,l])=>{r[t]=`/dictionary/${l}`}),(()=>{var t=V(),l=t.firstChild,e=l.firstChild,m=e.nextSibling;return a(l,(()=>{var n=f(()=>!!s.main_example_means);return()=>n()?(()=>{var o=Z();return a(o,()=>s.main_example_means),o})():null})(),e),a(e,()=>s.is_countable),y(k,m,()=>({style:"baseline",url_map:r,targets:s?.a?.map(([n,o])=>n)})),a(m,()=>s.definition),a(t,()=>s.example_list.map(n=>(()=>{var o=q(),C=o.firstChild,b=C.firstChild,P=b.nextSibling;return a(C,(()=>{var g=f(()=>!!n.audio_src);return()=>g()?_(x,{get src(){return n.audio_src},color:"gray"}):null})(),b),a(b,()=>n.example_main_title),a(P,()=>n.content),a(o,()=>n.exp_item?.map(g=>(()=>{var $=F(),w=$.firstChild;return a($,(()=>{var j=f(()=>!!g.audio_src);return()=>j()?_(x,{get src(){return g.audio_src},color:"gray"}):null})(),w),a(w,()=>g.content),$})()),null),o})()),null),t})()})),i})(),f(()=>f(()=>!!d.corpus_list?.length)()?(()=>{var i=G();return i.firstChild,a(i,()=>d.corpus_list?.map(({corpus_title:s,corpus_exas:r,a:t})=>{const l={};return t?.forEach?.(([e,m])=>{l[e]=`/dictionary/${m}`}),(()=>{var e=K(),m=e.firstChild;return y(k,e,()=>({style:"baseline",url_map:l,targets:t?.map(([n,o])=>n)})),a(m,s),a(e,()=>r?.map(n=>(()=>{var o=Q();return a(o,n),o})()),null),e})()}),null),i})():null)]}});var X=p('<div class="p-6 bg sticky top-0 bg-red-900 z-10 shadow-lg"><div class="max-w-screen-sm flex flex-1 m-auto">'),Y=p('<div class="h-96 flex items-center justify-center">');const re=d=>{const[v,c]=h({}),[u,i]=h(null),s=async r=>await N(r.trim().split(" ").join("-")).then(({data:t})=>{if(!t){c({}),i(400);return}const l=JSON.parse(t);l.word=r,c(l),i(null)}).catch(()=>{c({}),i(500)});return E(()=>{const r=M(),t=decodeURIComponent(r.word||"");t?.trim?.()&&R(t.trim().split(" ").join("-")).then(async({data:l})=>{if(!l?.data){await s(t);return}const e=JSON.parse(l.data);Array.isArray(e)?c({word_family:[],dicts:e,word:t}):(e.word=t,c(e)),i(null)}).catch(l=>{i(500)})}),_(U,{get children(){return[(()=>{var r=X(),t=r.firstChild;return a(t,_(H,{})),r})(),_(J,{get children(){return[f(()=>v()?.dicts?.map?.((r,t)=>{const l=v()?.dicts.map(e=>e.POS).filter(e=>!!e).length;return _(W,{item:r,get word(){return v().word},pos_len:l,index:t})})),f(()=>f(()=>!!u())()?(()=>{var r=Y();return a(r,_(B,{get code(){return u()}})),r})():null)]}})]}})};export{re as default};
